version: '3.8'

# Development setup with Ngrok tunnels for Google OAuth testing
# Usage: docker-compose -f docker-compose.dev.yml up

services:
  # Ngrok Tunnel for Frontend (port 5173)
  ngrok-client:
    image: ngrok/ngrok:latest
    container_name: studiogen-ngrok-client
    restart: unless-stopped
    environment:
      NGROK_AUTHTOKEN: ${NGROK_AUTHTOKEN}
    command: http host.docker.internal:5173 --log=stdout
    ports:
      - "4040:4040"  # Ngrok dashboard - check http://localhost:4040 for public URL
    extra_hosts:
      - "host.docker.internal:host-gateway"

  # Ngrok Tunnel for Backend API (port 3001)  
  ngrok-server:
    image: ngrok/ngrok:latest
    container_name: studiogen-ngrok-server
    restart: unless-stopped
    environment:
      NGROK_AUTHTOKEN: ${NGROK_AUTHTOKEN}
    command: http host.docker.internal:3001 --log=stdout
    ports:
      - "4041:4040"  # Ngrok dashboard for server
    extra_hosts:
      - "host.docker.internal:host-gateway"

networks:
  default:
    name: studiogen-dev-network
